# Project
## RPC

Raft uses RPC calls to communicate between servers (e.g. for handling
heartbeats).
To perform RPC calls, [gRPC][grpc] was chosen as the RPC framework.
gRPC was chosen because it is:

* open source
* high performance
* widely adopted
* a Rust implementation is available ([pingcap/grpc-rs][pingcap/grpc-rs])

### RPC Service Definition

Most RPC systems require you to define a service which specifies the interface
of the service, including: available functions, function parameters, return
types, etc.
Service definitions are typically done in an interface definition language
(IDL).

By default, gRPC [prescribes][grpc-service-definition] the use of Google's
[protocol buffers][protocol-buffers] as its IDL.
Protocol buffers are an acceptable choice of IDL as they are:

* language-neutral
* platform-neutral
* extensible
* a Rust implementation is available ([stepancheg/rust-protobuf][stepancheg/rust-protobuf]).

The service definition files for the Raft server were placed in the `protos/`
directory.
In order to invoke RPC calls programatically, we must first generate Rust code
from the service definitions.
To do so, the [protoc-rust-grpc][protoc-rust-grpc] crate is invoked by the build
script (`build.rs`).
This compiles the service definitions into code, which is output to the
`src/protos/` directory.

### Raft Service

The code generated by protoc-rust-grpc in the `src/protos/` directory provides
the interface for the Raft service.
Each portion of the interface will be documented here (TODO).

# Resources

* [gRPC][grpc]: a high performance, open-source universal RPC framework
    * [gRPC - Service definition][grpc-service-definition]: defining services in gRPC
* [pingcap/grpc-rs][pingcap/grpc-rs]: gRPC in Rust
* [protocol-buffers][protocol-buffers]: Google's protocol buffers
* [stepancheg/rust-protobuf][stepancheg/rust-protobuf]: protocol buffers in Rust
    * [protoc-rust-grpc][protoc-rust-grpc]: invoke protoc programmatically

[grpc]: https://grpc.io
[grpc-service-definition]: https://grpc.io/docs/guides/concepts.html#service-definition
[pingcap/grpc-rs]: https://github.com/pingcap/grpc-rs
[protocol-buffers]: https://developers.google.com/protocol-buffers/
[protoc-rust-grpc]: https://github.com/stepancheg/grpc-rust/tree/master/protoc-rust-grpc
[stepancheg/rust-protobuf]: https://github.com/stepancheg/rust-protobuf
